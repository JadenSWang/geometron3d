<a href = "editor.php">editor.php</a>


<div id = "x3dbox">
    <x3d id = "mainx3d">
        <scene id = "main">
            
            
        </scene>
    </x3d>
</div>
<input id = "glyphinput"/>
<script>
//http://edutechwiki.unige.ch/en/X3D_grouping_and_transforms
//https://doc.x3dom.org/author/index.html
/*document.getElementById("foo").onclick = function(){
    window.location.href = "editor.php";
}*/

unit = 1;
transformIndex = 0;

//currentGlyph = "0700,0721,0742,0730,0730,0730,0724,0743,0751,0752,0755,0732,0727,0741,";
currentGlyph = "0721,0740,0730,0730,0730,0740,0732,0732,0732,";
main = document.getElementById("main");


redraw();
function redraw(){
    currentx3d = "";
    transformIndex = 0;
    transforms = [];
    doTheThing(0700);
    drawGlyph(currentGlyph);
}

function drawGlyph(localString){
    var tempArray = localString.split(',');
    for(var index = 0;index < tempArray.length;index++){
        doTheThing(parseInt(tempArray[index],8));
    }
}

function doTheThing(localCommand){
    if(localCommand == 0700){
        r = [0,0,0];
        xhat = [unit,0,0];
        yhat = [0,unit,0];
        zhat = [0,0,unit];
        scaleFactor = 2;
        thetaStep = Math.PI;
        solidColor = "1 0 0";
        
    }
    if(localCommand == 0710){
        scaleFactor = 2;
    }
    if(localCommand == 0711){
        scaleFactor = 1.5;//     3/2
    }
    if(localCommand == 0712){
        scaleFactor = 1.25;//    5/4
    }
    if(localCommand == 0713){
        scaleFactor = 1.125;//   9/8
    }
    if(localCommand == 0714){
        scaleFactor = 1.0625;//  17/16
    }

    if(localCommand == 0720){
        solidColor = "1 1 1";
    }
    if(localCommand == 0721){
        solidColor = "1 0 0";
    }
    if(localCommand == 0722){
        solidColor = "0 1 0";
    }
    if(localCommand == 0723){
        solidColor = "0 0 1";
    }
    if(localCommand == 0724){
        solidColor = "0 1 1";
    }
    if(localCommand == 0725){
        solidColor = "1 1 0";
    }
    if(localCommand == 0726){
        solidColor = "1 0 1";
    }
    if(localCommand == 0727){
        solidColor = "0.5 0.5 0.5";
    }


    if(localCommand == 0730){
        r  = [xhat[0] + r[0],xhat[1] + r[1],xhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation", xhat[0].toString() + " " + xhat[1].toString() + " " + xhat[2].toString() );
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        
        transformIndex++;
    }
    if(localCommand == 0731){
        r  = [-xhat[0] + r[0],-xhat[1] + r[1],-xhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation",(-xhat[0]).toString() + " " + (-xhat[1]).toString() + " " + (-xhat[2]).toString() );
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        transformIndex++;
        
    }
    if(localCommand == 0732){
        r  = [yhat[0] + r[0],yhat[1] + r[1],yhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation",yhat[0].toString() + " " + yhat[1].toString() + " " + yhat[2].toString() );
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        transformIndex++;
    }
    if(localCommand == 0733){
        r  = [-yhat[0] + r[0],-yhat[1] + r[1],-yhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation",(-yhat[0]).toString() + " " + (-yhat[1]).toString() + " " + (-yhat[2]).toString() );
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        transformIndex++;
    }
    if(localCommand == 0734){
        r  = [zhat[0] + r[0],zhat[1] + r[1],zhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation",zhat[0].toString() + " " + zhat[1].toString() + " " + zhat[2].toString() );
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        transformIndex++;
    }
    if(localCommand == 0735){
        r  = [-zhat[0] + r[0],-zhat[1] + r[1],-zhat[2] + r[2]];
        var newt = document.createElement("transform");
        newt.setAttribute("translation",(-zhat[0]).toString() + " " + (-zhat[1]).toString() + " " + (-zhat[2]).toString());
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(newt);
        }
        else{
            document.getElementById("main").appendChild(newt);
        }
        transforms.push(newt);
        transformIndex++;
    }
    
    if(localCommand == 0740){
        //box
        var news = document.createElement("shape");
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(news);
        }
        else{
            main.appendChild(news);
        }
        var newa = document.createElement("appearance");
        news.appendChild(newa);
        var newm = document.createElement("material");
        newm.setAttribute("diffuseColor",solidColor);
        newa.appendChild(newm);
        var newb = document.createElement("box");
        news.appendChild(newb);
        newb.setAttribute("size",(1.0*xhat[0]).toString() + " " + (1.0*yhat[1]).toString() + " " + (1.0*zhat[2]).toString());
        
    }
    if(localCommand == 0741){
        
        //sphere
        var news = document.createElement("shape");
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(news);
        }
        else{
            main.appendChild(news);
        }
        var newa = document.createElement("appearance");
        news.appendChild(newa);
        var newm = document.createElement("material");
        newm.setAttribute("diffuseColor",solidColor);
        newa.appendChild(newm);
        var newb = document.createElement("sphere");
        news.appendChild(newb);
        newb.setAttribute("size",(1.0*xhat[0]).toString() + " " + (1.0*yhat[1]).toString() + " " + (1.0*zhat[2]).toString());
        
    }
    if(localCommand == 0742){
        //cylinder
        var news = document.createElement("shape");
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(news);
        }
        else{
            main.appendChild(news);
        }
        var newa = document.createElement("appearance");
        news.appendChild(newa);
        var newm = document.createElement("material");
        newm.setAttribute("diffuseColor",solidColor);
        newa.appendChild(newm);
        var newb = document.createElement("cylinder");
        news.appendChild(newb);
        newb.setAttribute("size",(1.0*xhat[0]).toString() + " " + (1.0*yhat[1]).toString() + " " + (1.0*zhat[2]).toString());
    }
    if(localCommand == 0743){
        
        //cone
        var news = document.createElement("shape");
        if(transformIndex > 0){
            transforms[transformIndex - 1].appendChild(news);
        }
        else{
            main.appendChild(news);
        }
        var newa = document.createElement("appearance");
        news.appendChild(newa);
        var newm = document.createElement("material");
        newm.setAttribute("diffuseColor",solidColor);
        newa.appendChild(newm);
        var newb = document.createElement("cone");
        news.appendChild(newb);
        newb.setAttribute("size",(1.0*xhat[0]).toString() + " " + (1.0*yhat[1]).toString() + " " + (1.0*zhat[2]).toString());
            
    }
    
    if(localCommand == 0750){
        xhat = [scaleFactor*xhat[0],scaleFactor*xhat[1],scaleFactor*xhat[2]];
    }
    if(localCommand == 0751){
        xhat = [xhat[0]/scaleFactor,xhat[1]/scaleFactor,xhat[2]/scaleFactor];
    }
    if(localCommand == 0752){
        yhat = [scaleFactor*yhat[0],scaleFactor*yhat[1],scaleFactor*yhat[2]];
    }
    if(localCommand == 0753){
        yhat = [yhat[0]/scaleFactor,yhat[1]/scaleFactor,yhat[2]/scaleFactor];
    }
    if(localCommand == 0754){
        zhat = [scaleFactor*zhat[0],scaleFactor*zhat[1],scaleFactor*zhat[2]];
    }
    if(localCommand == 0755){
        zhat = [zhat[0]/scaleFactor,zhat[1]/scaleFactor,zhat[2]/scaleFactor];
    }
    
}



</script>
<style>
#mainx3d{
    position:absolute;
    left:0px;
    right:0px;
    bottom:0px;
    top:0px;
}
#x3dbox{
    position:absolute;
    left:0px;
    right:0px;
    top:40px;
    bottom:0px;
}
</style>