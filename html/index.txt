<a href = "editor.php">editor.php</a>

<!--

http://edutechwiki.unige.ch/en/X3D_grouping_and_transforms


<x3d id = "main">
  <scene>
   <transform rotation = '1 0 0 0.75'> 

    <transform rotation = '0 1 0 0.75' translation='-3 0 0'> 
      <shape>
      <appearance>
      <material diffuseColor='0 1 0'></material>
      </appearance>
      <cone></cone>
      </shape>
      <transform translation='3 0 0'> 
        <shape>
        <appearance>
        <material diffuseColor='1 0 0'></material>
        </appearance>
        <box></box>
        </shape>
        <transform translation='3 0 0' scale = '1 0.25 1'> 
          <shape>
          <appearance>
          <material diffuseColor='0 0 1'></material>
          </appearance>
          <sphere id = "foo"></sphere>
          </shape>
        </transform>
      </transform>
    </transform>
   </transform>
  </scene>
</x3d>
-->
<div id = "x3dbox"></div>
<script>

/*document.getElementById("foo").onclick = function(){
    window.location.href = "editor.php";
}*/

unit = 1;
transformIndex = 0;
currentx3d = "<x3d id = \"main\">\n  <scene>";

currentGlyph = "0700,0740,0730,0730,0730,0740,0751,0752,0755,0732,0740,";

redraw();
function redraw(){
    currentx3d = "<x3d id = \"main\">\n  <scene>";
    drawGlyph(currentGlyph);
    currentx3d += "\n</scene>\n</x3d>";
    document.getElementById("x3dbox").innerHTML = currentx3d;
}

function drawGlyph(localString){
    var tempArray = localString.split(',');
    for(var index = 0;index < tempArray.length;index++){
        doTheThing(parseInt(tempArray[index],8));
    }
}

function doTheThing(localCommand){
    if(localCommand == 0700){
        r = [0,0,0];
        xhat = [unit,0,0];
        yhat = [0,unit,0];
        zhat = [0,0,unit];
        scaleFactor = 2;
        thetaStep = Math.PI;
    }
    if(localCommand == 0710){
        scaleFactor = 2;
    }
    if(localCommand == 0711){
        scaleFactor = 1.5;//     3/2
    }
    if(localCommand == 0712){
        scaleFactor = 1.25;//    5/4
    }
    if(localCommand == 0713){
        scaleFactor = 1.125;//   9/8
    }
    if(localCommand == 0714){
        scaleFactor = 1.0625;//  17/16
    }

    if(localCommand == 0730){
        r  = [xhat[0] + r[0],xhat[1] + r[1],xhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + xhat[0].toString() + " " + xhat[1].toString() + " " + xhat[2].toString() + "'>";
        transformIndex++;
    }
    if(localCommand == 0731){
        r  = [-xhat[0] + r[0],-xhat[1] + r[1],-xhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + (-xhat[0]).toString() + " " + (-xhat[1]).toString() + " " + (-xhat[2]).toString() + "'>";
        transformIndex++;
    }
    if(localCommand == 0732){
        r  = [yhat[0] + r[0],yhat[1] + r[1],yhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + yhat[0].toString() + " " + yhat[1].toString() + " " + yhat[2].toString() + "'>";
        transformIndex++;
    }
    if(localCommand == 0733){
        r  = [-yhat[0] + r[0],-yhat[1] + r[1],-yhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + (-yhat[0]).toString() + " " + (-yhat[1]).toString() + " " + (-yhat[2]).toString() + "'>";
        transformIndex++;
    }
    if(localCommand == 0734){
        r  = [zhat[0] + r[0],zhat[1] + r[1],zhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + zhat[0].toString() + " " + zhat[1].toString() + " " + zhat[2].toString() + "'>";
        transformIndex++;
    }
    if(localCommand == 0735){
        r  = [-zhat[0] + r[0],-zhat[1] + r[1],-zhat[2] + r[2]];
        currentx3d += "\n  <transform translation= '" + (-zhat[0]).toString() + " " + (-zhat[1]).toString() + " " + (-zhat[2]).toString() + "'>";
        transformIndex++;
    }
    
    if(localCommand == 0740){
        //box
        currentx3d += "\n<shape>";
        currentx3d += "\n<appearance>";
        currentx3d += "\n<material diffuseColor='1 0 0'></material>";
        currentx3d += "\n</appearance>";
        currentx3d += "\n<box size = '";
        currentx3d += xhat[0].toString() + " " + yhat[1].toString() + " " + zhat[2].toString();
        currentx3d += "'></box>";
        currentx3d += "\n</shape>";
    
    }
    if(localCommand == 0741){
        //ball
    }
    if(localCommand == 0742){
        //cylinder
    }
    if(localCommand == 0743){
        //cone
    }
    
    if(localCommand == 0750){
        xhat = [scaleFactor*xhat[0],scaleFactor*xhat[1],scaleFactor*xhat[2]];
    }
    if(localCommand == 0751){
        xhat = [xhat[0]/scaleFactor,xhat[1]/scaleFactor,xhat[2]/scaleFactor];
    }
    if(localCommand == 0752){
        yhat = [scaleFactor*yhat[0],scaleFactor*yhat[1],scaleFactor*yhat[2]];
    }
    if(localCommand == 0753){
        yhat = [yhat[0]/scaleFactor,yhat[1]/scaleFactor,yhat[2]/scaleFactor];
    }
    if(localCommand == 0754){
        zhat = [scaleFactor*zhat[0],scaleFactor*zhat[1],scaleFactor*zhat[2]];
    }
    if(localCommand == 0755){
        zhat = [zhat[0]/scaleFactor,zhat[1]/scaleFactor,zhat[2]/scaleFactor];
    }
    
}

</script>
<style>
#main{
    position:absolute;
    left:0px;
    right:0px;
    bottom:0px;
    top:0px;
}
#x3dbox{
    position:absolute;
    left:0px;
    right:0px;
    bottom:0px;
    top:110px;
    
}
</style>